<link rel="import" href="bower_components/polymer/polymer.html" />

<dom-module id="photo-cropper">
	<style>
		:host {
			display:inline-block;
		}

		.modal-shadow {
	      display: block;
	      background: rgba(0,0,0,0.7);
	      bottom: 0;
	      left: 0;
	      overflow-x: hidden !important;
	      overflow-y: auto !important;
	      position: fixed;
	      right: 0;
	      text-align: center;
	      top: 0;
	      z-index: 6;
	    }
		
		.modal-shadow:before {
	      content: '';
	      display: inline-block;
	      height: 100%;
	      position: relative;
	      vertical-align: middle;
	      width: 0;
	    }

	    .modal-dialog-box {
	      background: #fff;
	      box-sizing: border-box !important;
	      display: inline-block;
	      font-family: 'Open Sans', Arial, Helvetica, sans-serif;
	      height: 50%;
	      min-height: 310px;
	      min-width: 310px;
	      padding: 15px 15px 30px 15px;
	      position: relative;
	      vertical-align: middle;
	      width: 40%;
	    }
	​
	    .modal-dialog-box h3 {
	      margin: 5px 0 !important;
	      font-size: 15px;
	    }
	​
	    .modal-dialog-content {
	      background: #ededed;
	      width: 100%;
	      height: 80%;
	    }
	​
	    #photo-container {
	      display: block;
	      height: 100% !important;
	      width: 100% !important;
	    }
	</style>
	<template>
		<input type="file" id="photoFile" on-change="openModal"/>
		<div id="modal-dialog" class="modal-shadow">
      		<div class="modal-dialog-box">
       			<h3>Selecciona el area a cortar</h3>
		        <div class="modal-dialog-content">
		          <div id="photo-container">
		            <img id="photoPreview" alt="Some Text"/>
		          </div>
		        </div>
		        <button id="setCropMode" type="button">Seleccionar</button>
		        <button id="setMoveMode" type="button">Mover</button>
		        <button id="closeModal" type="button">Listo</button>
	      	</div>
    	</div>
    	<button id="showModal" type="button">click</button>
	</template>
	<script>
	Polymer({
		is: 'photo-cropper',
		properties: {
			croppedImageURL: {
				type: String,
				value: ''
			},
			photoId: {
				type: String,
				value: ''
			}
		},
		openModal: function (event, detail) {
			var 
				FReader = new FileReader(),
				that = this;
				
			FReader.readAsDataURL(that.$.photoFile.files[0]);

			FReader.onload = function (FREvent) {
				that.$.photoPreview.src = FREvent.target.result;
			};
		},
		closeModal: function (event, detail) {
			var eventName = this.photoId + 'Cropped';
			this.fire(eventName, {croppedImageURL: this.croppedImageURL});
		}
	});
	</script>
</dom-module>